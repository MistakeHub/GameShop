{"remainingRequest":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\src\\components\\UserProfileComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\src\\components\\UserProfileComponent.vue","mtime":1632346579193},{"path":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630103585000},{"path":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\node_modules\\babel-loader\\lib\\index.js","mtime":1630103585000},{"path":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630103585000},{"path":"C:\\Users\\Mistake22\\source\\repos\\GameShop\\FrontEnd\\sitee\\node_modules\\vue-loader\\lib\\index.js","mtime":1630103585000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KICBleHBvcnQgZGVmYXVsdHsNCiAgcHJvcHM6IHsNCiAgfSwNCiAgICAgDQogICAgICAgICAgbmFtZTogJ1VzZXJQcm9maWxlQ29tcG9uZW50JywNCiAgICAgICAgICBkYXRhKCl7DQogICAgICAgICAgICAgIHJldHVybnsNCiAgICAgICAgICAgICAgICAgdXNlcjp7fSwNCiAgICAgICAgICAgICAgIGZpbGVzOiBuZXcgRm9ybURhdGEoKSwNCiAgICAgICAgICAgICAgIGxvY2FsdXNlcm5hbWU6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIiksDQogICAgICAgICAgICAgICBsb2NhbHJvbGU6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInJvbGUiKSwNCiAgICAgICAgICAgICAgIHJlYXNvbjoiIg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICBtb3VudGVkKCl7DQogICAgICAgICAgICAgICAgaWYodGhpcy5zZXNzaW9uID09dW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICAgdGhpcy4kY29va2llLnNldCgndXNlcnNlc3Npb24nLCAndXNlcnNlc3Npb24nLCB7IGV4cGlyZXM6ICcxaCcgfSk7DQoNCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubG9jYWx1c2VybmFtZSkNCiAgICAgICAgICAgIGF4aW9zLmdldCgiaHR0cHM6Ly9sb2NhbGhvc3Q6NDQzMDMvZ2V0dXNlci8iK3RoaXMuJHJvdXRlLnBhcmFtcy51c2VybG9naW4pLnRoZW4oKHJlc3BvbnNlKT0+IHt0aGlzLnVzZXI9cmVzcG9uc2UuZGF0YTsgY29uc29sZS5sb2codGhpcy51c2VyKX0pOw0KDQogICAgICAgICAgfSwNCiAgICAgICAgICBtZXRob2RzOiB7DQoNCiAgICAgICAgICAgICAgICBTaG93QmFuTW9kYWw6ZnVuY3Rpb24oKXsNCiAgICAgICAgDQogdGhpcy4kcmVmc1snYnYtbW9kYWwtZXhhbXBsZTEnXS5zaG93KCk7DQogICAgICAgICAgIA0KDQogICAgICB9LA0KDQogICAgICAgICAgDQoNCiAgICAgICAgICAgICAgQmFuVXNlcigpew0KDQogICAgICAgICAgICAgICAgIGF4aW9zKHttZXRob2Q6J1BPU1QnLHVybDoiaHR0cHM6Ly9sb2NhbGhvc3Q6NDQzMDMvYmFudXNlci8iK3RoaXMuJHJvdXRlLnBhcmFtcy51c2VybG9naW4sIHBhcmFtczp7cmVhc29uOnRoaXMucmVhc29ufSxoZWFkZXJzOnsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJywNCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIsDQogICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJlYXJlciAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKQ0KDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9fSkudGhlbigocmVzcG9uc2UpPT4ge3RoaXMudXNlcj1yZXNwb25zZS5kYXRhOyBjb25zb2xlLmxvZyh0aGlzLnVzZXIpO3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTt9KTsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICB9LA0KDQoNCiAgICAgICAgICAgICAgICAgVW5CYW5Vc2VyKCl7DQoNCiAgICAgICAgICAgICAgICAgYXhpb3Moe21ldGhvZDonUE9TVCcsdXJsOiJodHRwczovL2xvY2FsaG9zdDo0NDMwMy91bmJhbnVzZXIvIit0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcmxvZ2luLGhlYWRlcnM6ew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpDQoNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH19KS50aGVuKChyZXNwb25zZSk9PiB7dGhpcy51c2VyPXJlc3BvbnNlLmRhdGE7IGNvbnNvbGUubG9nKHRoaXMudXNlcik7IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTt9KTsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICB9LA0KICAgICAgDQogICAgICAgICAgICBmaWxlQ2hhbmdlKGZpbGVMaXN0KSB7DQogICAgICAgIHRoaXMuZmlsZXMuYXBwZW5kKCJwaG90byIsIGZpbGVMaXN0WzBdLCBmaWxlTGlzdFswXS5uYW1lKTsNCiAgICAgICAgY29uc29sZS5sb2coZmlsZUxpc3RbMF0ubmFtZSkNCiAgICB9LA0KDQogICAgICAgICAgICAgdXBsb2FkOiBmdW5jdGlvbigpew0KICAgICAgICBjb25zdCBwaG90byA9IHRoaXMuZmlsZXM7DQogICAgICAgIHZhciBwYXNzd29yZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFzc3dvcmQiKQ0KICAgICAgICBheGlvcyh7bWV0aG9kOidQT1NUJywgdXJsOiJodHRwczovL2xvY2FsaG9zdDo0NDMwMy91cGxvYWRhdmF0YXIvIit0aGlzLnVzZXIubG9naW4sIGhlYWRlcnM6ew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpDQoNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0sIGRhdGE6cGhvdG8gLHBhcmFtczp7DQogICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkDQoNCiAgICAgICAgfSwNCiAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgZ3JvdXA6ICdmb28nLA0KICB0eXBlOidzdWNjZXNzJywNCiANCiAgdGV4dDogItCj0YHQv9C10YjQvdC+ISINCn0pOw0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkuY2F0Y2goZD0+ew0KICAgICAgICAgICAgICBpZihkLnJlc3BvbnNlKQ0KICAgICAgICAgDQogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogIGdyb3VwOiAnZm9vJywNCiAgdHlwZTonZXJyb3InLA0KICB0aXRsZTogZC5yZXNwb25zZS5zdGF0dXMsDQogIHRleHQ6IGQubWVzc2FnZQ0KfSk7DQogIGlmKGQucmVxdWVzdCl7DQogICAgICAgICBjb25zb2xlLmxvZyhkLnJlcXVlc3Quc3RhdHVzKQ0KICAgICB0aGlzLiRub3RpZnkoew0KICBncm91cDogJ2ZvbycsDQogIHR5cGU6J2Vycm9yJywNCiAgdGl0bGU6ICfQntGI0LjQsdC60LAnLA0KICB0ZXh0OmQubWVzc2FnZQ0KfSk7DQogIH0NCn0pO30sDQoNCiAgICAgIA0KICAgDQogICAgICAgICAgfQ0KICAgIA0KICB9DQoNCg=="},{"version":3,"sources":["UserProfileComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA","file":"UserProfileComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n<div class=\"row py-5 px-4\" style=\"margin-top:10%\">\r\n    <div class=\"col-md-5 mx-auto\">\r\n        <!-- Profile widget -->\r\n        <div class=\"bg-white shadow rounded overflow-hidden\">\r\n            <div class=\"px-4 pt-0 pb-4 cover\">\r\n                <div class=\"media align-items-end profile-head\">\r\n                    <div class=\"profile mr-3\"><img :src=\"user.avatar==null?'https://localhost:44303/getImage/Avatar/Default.jpg':user.avatar\" alt=\"...\" style=\"max-widht:180px; max-height:220px\" class=\"rounded mb-2 img-thumbnail\">\r\n                           <h4 class=\"mt-0 mb-0\">{{user.login}}</h4>\r\n                           <br>\r\n                                <form v-if=\"localusername==user.login || localrole=='Редактор'\" enctype=\"multipart/form-data\">\r\n        <input type=\"file\" name=\"photo\"  v-on:change=\"fileChange($event.target.files)\"/>\r\n        <button type=\"button\" class=\"btn btn-outline-dark btn-sm btn-block\" @click=\"upload()\">Upload</button>\r\n    </form>\r\n                  \r\n         <div class=\"media-body mb-5 text-white\">\r\n                 \r\n                        <p class=\"small mb-4\"> <i class=\"fas fa-map-marker-alt mr-2\"></i>New York</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"bg-light p-4 d-flex justify-content-end text-center\">\r\n                <ul class=\"list-inline mb-0\">\r\n                    <li class=\"list-inline-item\">\r\n                        <h5 class=\"font-weight-bold mb-0 d-block\">{{user.countofComments}}</h5><small class=\"text-muted\"> <i class=\"fas fa-image mr-1\"></i>Комментарии</small>\r\n                    </li>\r\n                       <li class=\"list-inline-item\">\r\n                        <h5 class=\"font-weight-bold mb-0 d-block\">{{user.numberOfPurchases}}</h5><small class=\"text-muted\"> <i class=\"fas fa-image mr-1\"></i>Покупки</small>\r\n                    </li>\r\n                 \r\n                </ul>\r\n            </div>\r\n           \r\n            <div class=\"py-4 px-4\">\r\n              <b-button bv-modal-example1  v-if=\"localrole=='Редактор' && user.statuse=='Онлайн' \" variant=\"danger\" @click=\"ShowBanModal()\"  >Заблокировать</b-button>\r\n              <b-button bv-modal-example1  v-if=\"localrole=='Редактор' && user.statuse=='Заблокирован' \" variant=\"success\" @click=\"UnBanUser()\"  >Разблокировать</b-button>\r\n            </div>\r\n              <div>\r\n   \r\n\r\n  <b-modal ref=\"bv-modal-example1\" hide-footer>\r\n    <template #modal-title>\r\n    <h1>Блокировка пользователя</h1>\r\n    </template>\r\n    \r\n    <div class=\"d-block text-center\">\r\n      <label>Причина</label>\r\n      <b-input v-model=\"reason\"></b-input>\r\n    </div>\r\n    <b-button class=\"mt-3\" block @click=\"BanUser()\">Подтвердить </b-button>\r\n  </b-modal>\r\n</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>\r\n    \r\n</template>\r\n<style >\r\n.profile-head {\r\n    transform: translateY(5rem)\r\n}\r\n\r\n.cover {\r\n\r\n    background-size: cover;\r\n    background-repeat: no-repeat\r\n}\r\n\r\nbody {\r\n    background: #654ea3;\r\n    background: linear-gradient(to right, #e96443, #904e95);\r\n    min-height: 100vh;\r\n    overflow-x: hidden\r\n}\r\n</style>\r\n<script>\r\n\r\n\r\nimport axios from 'axios'\r\n  export default{\r\n  props: {\r\n  },\r\n     \r\n          name: 'UserProfileComponent',\r\n          data(){\r\n              return{\r\n                 user:{},\r\n               files: new FormData(),\r\n               localusername:localStorage.getItem(\"username\"),\r\n               localrole:localStorage.getItem(\"role\"),\r\n               reason:\"\"\r\n              }\r\n          },\r\n          mounted(){\r\n                if(this.session ==undefined){\r\n                 this.$cookie.set('usersession', 'usersession', { expires: '1h' });\r\n\r\n               }\r\n               console.log(this.localusername)\r\n            axios.get(\"https://localhost:44303/getuser/\"+this.$route.params.userlogin).then((response)=> {this.user=response.data; console.log(this.user)});\r\n\r\n          },\r\n          methods: {\r\n\r\n                ShowBanModal:function(){\r\n        \r\n this.$refs['bv-modal-example1'].show();\r\n           \r\n\r\n      },\r\n\r\n          \r\n\r\n              BanUser(){\r\n\r\n                 axios({method:'POST',url:\"https://localhost:44303/banuser/\"+this.$route.params.userlogin, params:{reason:this.reason},headers:{\r\n                \r\n                    'Content-Type': 'multipart/form-data',\r\n                        \"Accept\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem(\"user\")\r\n\r\n                \r\n            }}).then((response)=> {this.user=response.data; console.log(this.user);window.location.reload();});\r\n                  \r\n              },\r\n\r\n\r\n                 UnBanUser(){\r\n\r\n                 axios({method:'POST',url:\"https://localhost:44303/unbanuser/\"+this.$route.params.userlogin,headers:{\r\n                \r\n                    'Content-Type': 'multipart/form-data',\r\n                        \"Accept\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem(\"user\")\r\n\r\n                \r\n            }}).then((response)=> {this.user=response.data; console.log(this.user); window.location.reload();});\r\n                  \r\n              },\r\n      \r\n            fileChange(fileList) {\r\n        this.files.append(\"photo\", fileList[0], fileList[0].name);\r\n        console.log(fileList[0].name)\r\n    },\r\n\r\n             upload: function(){\r\n        const photo = this.files;\r\n        var password=localStorage.getItem(\"password\")\r\n        axios({method:'POST', url:\"https://localhost:44303/uploadavatar/\"+this.user.login, headers:{\r\n                \r\n                    'Content-Type': 'multipart/form-data',\r\n                        \"Accept\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem(\"user\")\r\n\r\n                \r\n            }, data:photo ,params:{\r\n             password: password\r\n\r\n        },\r\n           }).then(response => {\r\n                window.location.reload();\r\n            this.$notify({\r\n  group: 'foo',\r\n  type:'success',\r\n \r\n  text: \"Успешно!\"\r\n});\r\n             \r\n            }).catch(d=>{\r\n              if(d.response)\r\n         \r\n              this.$notify({\r\n  group: 'foo',\r\n  type:'error',\r\n  title: d.response.status,\r\n  text: d.message\r\n});\r\n  if(d.request){\r\n         console.log(d.request.status)\r\n     this.$notify({\r\n  group: 'foo',\r\n  type:'error',\r\n  title: 'Ошибка',\r\n  text:d.message\r\n});\r\n  }\r\n});},\r\n\r\n      \r\n   \r\n          }\r\n    \r\n  }\r\n\r\n</script>\r\n\r\n"]}]}